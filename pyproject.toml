[build-system]
    build-backend = "poetry.core.masonry.api"
    requires      = ["poetry-core"]

[tool.black]
    line-length    = 99
    target-version = ["py311"]

[tool.coverage.html]
    directory = "htmlcov"

[tool.coverage.paths]
    source = ["*/site-packages", "aoc"]

[tool.coverage.report]
    exclude_lines = [
        "def __repr__",
        "if 0:",
        "if __name__ == __main__:",
        "if self.debug",
        "if settings.DEBUG:",
        "pragma: no cover",
        "raise AssertionError",
        "raise NotImplementedError",
    ]
    fail_under = 60
    show_missing = true

[tool.coverage.run]
    branch         = true
    omit           = ["aoc/__init__.py", "aoc/visualisations/*"]
    relative_files = true
    source         = ["aoc"]

[tool.mypy]
    files                  = ["aoc/"]
    ignore_missing_imports = true
    plugins                = "numpy.typing.mypy_plugin"
    warn_return_any        = true
    warn_unused_configs    = true

[tool.poetry]
    authors = ["Paul Saunders <darac+github@darac.org.uk>"]
    classifiers = [
        "Programming Language :: Python :: 3",
        "Topic :: Games/Entertainment :: Puzzle Games",
    ]
    description = "darac's solutions for http://adventofcode.com"
    name = "aoc"
    readme = "README.md"
    version = "2022.10.5"

    [tool.poetry.dependencies]
        advent-of-code-data = "^2.0.0"
        importlib-metadata  = { version = "^1.0", python = "<3.8" }
        kivy                = { extras = ["base"], version = "^2.1.0" }
        more-itertools      = "^10.1.0"
        numpy               = "^1"
        pandas              = "^2.1.1"
        parse               = "^1.19.1"
        pygame              = "^2.1.2"
        python              = ">=3.9,<3.13"
        rich                = ">=10"

    [tool.poetry.group.dev.dependencies]
        black               = ">=23.9.1"
        bpython             = ">=0.24"
        coverage            = { extras = ["toml"], version = ">=7.3.2" }
        mypy                = "^1.6.1"
        pre-commit          = "^3.4.0"
        pytest              = "^7.2.0"
        pytest-cov          = "^4.0.0"
        pytest-gh-log-group = "^0.2.0"
        ruff                = "^0.0.292"
        toml-sort           = "^0.23.1"
        types-pyyaml        = "^6.0.12.2"

[tool.poetry.plugins."adventofcode.user"]
    darac_aoc = "aoc:solve"

[tool.pytest.ini_options]
    addopts          = "--cov --cov-report=term --cov-report=xml:coverage.xml --junitxml=junit.xml"
    junit_suite_name = "aoc"

[tool.ruff]
    ignore = [
        "N818", # Don't want to have to call exceptions *Error
        "S101", # Of course we want to use assert
    ]
    line-length = 99
    select = [
        "A",
        "ANN",
        "ARG",
        "ASYNC",
        "B",
        "C4",
        "COM",
        "E",
        "EM",
        "EXE",
        "F",
        "FA",
        "FIX",
        "G",
        "I",
        "ICN",
        "INP",
        "ISC",
        "N",
        "NPY",
        "PD",
        "PERF",
        "PIE",
        "PT",
        "PTH",
        "Q",
        "RET",
        "RSE",
        "RUF",
        "S",
        "SIM",
        "SLF",
        "TCH",
        "TD",
        "TID",
        "TRY",
        "UP",
        "W",
        "YTT",
    ]
    target-version = "py311"
